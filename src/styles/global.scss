@import "@new-ui/colors";
@import "@new-ui/spacings";
@import "@new-ui/typography";

@font-face{
    font-family: 'Source Serif VF';
    font-weight: 200 900;
    font-style: normal;
    font-stretch: normal;
    src: url('/src/fonts/WOFF2/SourceSerif4Variable-Roman.ttf.woff2') format('woff2-variations'),
         url('/src/fonts/WOFF/SourceSerif4Variable-Roman.ttf.woff') format('woff-variations'),
         url('/src/fonts/VAR/SourceSerif4Variable-Roman.ttf') format('truetype-variations');
}

@font-face{
    font-family: 'Source Serif VF';
    font-weight: 200 900;
    font-style: italic;
    font-stretch: normal;
    src: url('/src/fonts/WOFF2/SourceSerif4Variable-Italic.ttf.woff2') format('woff2-variations'),
         url('/src/fonts/WOFF/SourceSerif4Variable-Italic.ttf.woff') format('woff-variations'),
         url('/src/fonts/VAR/SourceSerif4Variable-Italic.ttf') format('truetype-variations');
}

:root {
    --serif: 'Source Serif VF', var(--transitional);
    --sans: var(--geometric-humanist);
}

:root,
::backdrop {
  --sl-hue-base: 250;
}

:root[data-theme='light'],
[data-theme='light'] ::backdrop {
  --sl-hue-base: 17;
}

body {
    font-family: var(--serif);
    font-optical-sizing: auto;
    font-variant-ligatures: common-ligatures discretionary-ligatures historical-ligatures;
    font-feature-settings: "liga", "dlig", "hlig";
    font-kerning: normal;
    font-variant-numeric: oldstyle-nums proportional-nums;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-synthesis-weight: none;
    overflow-wrap: break-word;
}

/* Typography */

h1, h2, h3, h4, h5, h6 {
    font-weight: 400;
    font-family: var(--sans);
}

p {
    font-weight: 400;
    font-family: var(--serif);
}

h1,
h2,
h3,
h4,
h5,
h6 {
    text-wrap: balance;
    font-weight: 400;
    font-variant-ligatures: no-common-ligatures;
    font-smooth: antialiased;
    -webkit-font-smoothing: antialiased;
    vertical-align: baseline;
}
h1 {
    font-size: var(--desktop-heading-01);
    line-height: var(--lh-desktop-heading-01);
}
h2 {
    font-size: var(--desktop-heading-02);
    line-height: var(--lh-desktop-heading-02);
}
h3 {
    font-size: var(--desktop-heading-03);
    line-height: var(--lh-desktop-heading-03);
}
h4 {
    font-size: var(--desktop-heading-04);
    line-height: var(--lh-desktop-heading-04);
}
h5 {
    font-size: var(--desktop-heading-05);
    line-height: var(--lh-desktop-heading-05);
}
h6 {
    font-size: var(--desktop-heading-06);
    line-height: var(--lh-desktop-heading-06);
}

p {
    font-size: var(--desktop-body-xl);
    line-height: var(--lh-desktop-body-xl);
    text-justify: inter-word;
    overflow-wrap: break-word;
    hanging-punctuation: first last;
    hyphens: auto;
    -webkit-hyphens: auto;
    -ms-hyphens: auto;
    orphans: 3;
    widows: 3;
}
  
  /* Search */
  
  @media (min-width: 50rem) {
    div:has(> site-search) {
      justify-content: center;
    }
  }
  
  @media (min-width: 72rem) {
    div:has(> site-search) {
      max-width: calc(var(--sl-content-width));
    }
  }
  
  @media (prefers-reduced-motion: no-preference) {
    site-search dialog::backdrop {
      animation: sl-rapide-search-backdrop-fade 150ms ease-out;
    }
  
    site-search dialog {
      animation: sl-rapide-search-dialog-zoom-in 150ms ease-out;
    }
  }
  
  @keyframes sl-rapide-search-backdrop-fade {
    from {
      -webkit-backdrop-filter: initial;
      backdrop-filter: initial;
      background-color: transparent;
    }
  
    to {
      -webkit-backdrop-filter: blur(0.25rem);
      backdrop-filter: blur(0.25rem);
      background-color: var(--sl-color-backdrop-overlay);
    }
  }
  
  @keyframes sl-rapide-search-dialog-zoom-in {
    from {
      opacity: 0;
      transform: scale(0.5) translateY(-2rem);
    }
  
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }
  
  site-search dialog {
    background-color: var(--sl-color-black);
    box-shadow: none;
    min-height: auto;
  }
  
  site-search dialog .dialog-frame {
    padding: 1rem;
  }
  
  site-search dialog #starlight__search {
    --sl-search-corners: calc(0.5rem * var(--pagefind-ui-scale));
    --pagefind-ui-border-radius: calc(0.5rem * var(--pagefind-ui-scale));
  }
  
  site-search dialog .pagefind-ui .pagefind-ui__search-input {
    background-color: var(--sl-rapide-ui-bg-color);
    border: 1px solid var(--sl-color-gray-4);
  }
  
  site-search dialog .pagefind-ui .pagefind-ui__search-input:focus-visible {
    border-color: var(--sl-color-accent);
    outline: 1px solid var(--sl-color-accent);
  }
  
  site-search dialog .pagefind-ui .pagefind-ui__message {
    padding-top: 0;
  }
  
  site-search dialog .pagefind-ui .pagefind-ui__message:has(+ .pagefind-ui__results:empty) {
    padding: 0;
  }
  
  site-search
    dialog
    #starlight__search
    .pagefind-ui
    :is(.pagefind-ui__result-title:not(:where(.pagefind-ui__result-nested *)), .pagefind-ui__result-nested) {
    border-inline: 1px solid var(--sl-rapide-ui-border-color);
    outline-offset: -1px;
  }
  
  site-search
    dialog
    #starlight__search
    .pagefind-ui
    :is(.pagefind-ui__result-title:not(:where(.pagefind-ui__result-nested *)), .pagefind-ui__result-nested):not(
      :focus-within
    ) {
    background-color: var(--sl-rapide-ui-bg-color);
  }
  
  site-search dialog #starlight__search .pagefind-ui .pagefind-ui__result-inner {
    gap: 0;
  }
  
  site-search dialog #starlight__search .pagefind-ui .pagefind-ui__result-inner > :first-child {
    border-top: 1px solid var(--sl-rapide-ui-border-color);
  }
  
  site-search dialog #starlight__search .pagefind-ui .pagefind-ui__result-inner > :last-child {
    border-bottom: 1px solid var(--sl-rapide-ui-border-color);
  }
  
  site-search dialog #starlight__search .pagefind-ui .pagefind-ui__result-excerpt mark {
    color: var(--sl-color-accent-high);
  }
  
  /* Sidebar */
  
  div.sidebar-pane {
    border-inline-end: 1px solid var(--sl-color-gray-5);
  }
  
  div.sidebar-pane summary {
    flex-direction: row-reverse;
    gap: 0.375rem;
    justify-content: start;
    padding: 0.2em var(--sl-sidebar-item-padding-inline);
    padding-inline: calc(var(--sl-sidebar-item-padding-inline) / 2) var(--sl-sidebar-item-padding-inline);
  }
  
  div.sidebar-pane summary:is(:hover, :focus-visible),
  div.sidebar-pane summary:is(:hover, :focus-visible) .large {
    color: var(--sl-color-accent-high);
  }
  
  div.sidebar-pane ul ul li {
    margin-inline-start: calc(var(--sl-sidebar-item-padding-inline) + (0.625rem / 2));
  }
  
  div.sidebar-pane summary:is(:hover, :focus-visible) + ul > li {
    border-inline-start-color: var(--sl-color-accent-high);
  }
  
  div.sidebar-pane a[aria-current='page'] {
    background-color: initial;
    color: var(--sl-color-text-accent);
  }
  
  div.sidebar-pane ul ul li:has(> a[aria-current='page']) {
    border-inline-start-color: var(--sl-color-accent-high);
  }
  
  div.sidebar-pane ul ul li:has(> a:not([aria-current='page']):is(:hover, :focus-visible)) {
    border-inline-start-color: var(--sl-color-gray-2);
  }
  
  div.sidebar-pane .top-level > li + li {
    margin-top: 1.25rem;
  }
  
  /* Content */
  
  .content-panel {
    padding-top: 1rem;
  }
  
  .content-panel + .content-panel {
    border-top: none;
    padding-top: 0;
  }
  
  .content-panel h1 {
    margin-top: 0.5rem;
  }
  
  @media (min-width: 72rem) {
    .content-panel h1 {
      margin-top: 1rem;
    }
  }
  
  .meta {
    align-items: center;
    flex-direction: row-reverse;
  }
  
  .meta a {
    border: 1px solid var(--sl-color-gray-5);
    border-radius: 0.5rem;
    padding: 0.25rem 0.5rem;
  }
  
  .meta a:is(:hover, :focus-visible) {
    border-color: var(--sl-color-gray-2);
    color: var(--sl-color-gray-2);
  }
  
  /* Table of contents */
  
  .right-sidebar {
    border-inline-start: initial;
  }
  
  @media (min-width: 72rem) {
    .right-sidebar {
      padding-top: calc(var(--sl-nav-height) + 1.75rem);
    }
  }
  
  starlight-toc li > a {
    border-inline-start: 1px solid var(--sl-color-hairline-light);
    border-radius: 0;
    margin-inline-start: 0.35rem;
    padding-inline-start: calc(1rem * var(--depth) + var(--pad-inline) + 0.35rem);
  }
  
  starlight-toc li > a[aria-current='true'] {
    border-color: var(--sl-color-accent-high);
  }
  
  starlight-toc li > a[aria-current='true']:is(:hover, :focus-visible) {
    color: var(--sl-color-accent-high);
  }
  
  starlight-toc li > a:not([aria-current='true']):is(:hover, :focus-visible) {
    border-color: var(--sl-color-gray-2);
  }
  
  /* Mobile table of contents */
  
  mobile-starlight-toc nav {
    -webkit-backdrop-filter: blur(0.5rem);
    backdrop-filter: blur(0.5rem);
    background-color: var(--sl-rapide-ui-header-bg-color);
    border-bottom: 1px solid var(--sl-color-gray-5);
    border-top-color: transparent;
  }
  
  @media (prefers-reduced-transparency) {
    mobile-starlight-toc nav {
      -webkit-backdrop-filter: initial;
      backdrop-filter: initial;
      background-color: var(--sl-color-black);
    }
  }
  
  mobile-starlight-toc nav details summary {
    border-bottom: initial;
  }
  
  mobile-starlight-toc nav:has(details[open]) {
    -webkit-backdrop-filter: initial;
    backdrop-filter: initial;
    background-color: var(--sl-color-black);
  }
  
  mobile-starlight-toc .dropdown {
    border: initial;
    border-bottom: var(--border-top) solid var(--sl-color-gray-6);
  }
  
  mobile-starlight-toc .dropdown a:is(:hover, :focus-visible) {
    background-color: var(--sl-rapide-ui-bg-color);
    color: var(--sl-color-accent-high);
  }
  
  /* Markdown */
  
  .sl-markdown-content a:not(:where(.not-content *)) {
    color: var(--sl-color-white);
    text-underline-offset: 0.25em;
  }
  
  .sl-markdown-content a:is(:hover, :focus-visible):not(:where(.not-content *)) {
    color: var(--sl-color-accent-high);
  }
  
  .sl-markdown-content code:not(:where(.not-content *)) {
    border-radius: 5px;
  }
  
  .sl-markdown-content tr:nth-child(2n):not(:where(.not-content *)) {
    background-color: var(--sl-color-gray-7);
  }
  
  .sl-markdown-content :is(th, td):not(:where(.not-content *)) {
    border: none;
  }
  
  .sl-markdown-content th:not(:where(.not-content *)) {
    border-bottom: 1px solid var(--sl-color-white);
  }
  
  .sl-markdown-content td:not(:where(.not-content *)) {
    border-bottom: 1px solid var(--sl-color-gray-5);
  }
  
  .sl-markdown-content details:not(:where(.not-content *)) {
    --sl-details-border-color--hover: var(--sl-color-gray-2);
  
    border-inline-start-width: 1px;
  }
  
  .sl-markdown-content .expressive-code .has-title {
    --ec-uiPadBlk: 0.375rem;
  }
  
  .sl-markdown-content .expressive-code .frame.is-terminal .header {
    border-bottom: 1px solid var(--sl-rapide-ui-border-color);
  }
  
  /* Tabs */
  
  starlight-tabs .tablist-wrapper {
    overflow-y: hidden;
  }
  
  starlight-tabs ul[role='tablist'] {
    border-bottom-width: 1px;
  }
  
  starlight-tabs ul[role='tablist'] a[role='tab'] {
    padding-block: 0.25rem;
  }
  
  starlight-tabs ul[role='tablist'] a[role='tab']:not([aria-selected='true']):hover {
    border-color: var(--sl-color-white);
    color: var(--sl-color-white);
  }
  
  /* Cards */
  
  .sl-markdown-content .card-grid.stagger {
    --stagger-height: 2.5rem;
  }
  
  .sl-markdown-content .card {
    --sl-text-h1: var(--sl-text-4xl);
    --sl-text-h2: var(--sl-text-3xl);
    --sl-text-h3: var(--sl-text-2xl);
    --sl-text-h4: var(--sl-text-xl);
    --sl-text-h5: var(--sl-text-lg);
  
    border-radius: 0.5rem;
    padding: clamp(1rem, calc(0.125rem + 1.5vw), 2.5rem);
  }
  
  .sl-markdown-content .card .title .icon {
    font-size: 1.875rem;
  }
  
  .sl-markdown-content .sl-link-card {
    box-shadow: none;
  }
  
  .sl-markdown-content .sl-link-card:hover {
    background: initial;
  }
  
  .sl-markdown-content .sl-link-card .title {
    color: var(--sl-color-white);
  }
  
  .sl-markdown-content .sl-link-card .description {
    color: var(--sl-color-gray-3);
  }
  
  .sl-markdown-content .sl-link-card:is(:hover, :focus-visible) .description {
    color: var(--sl-color-gray-2);
  }
  
  .sl-markdown-content .sl-link-card .icon {
    color: var(--sl-color-gray-2);
  }
  
  /* Asides */
  
  .starlight-aside.starlight-aside--note {
    --sl-rapide-asides-bg-color: var(--sl-color-blue-low);
    --sl-rapide-asides-link-color: var(--sl-color-blue-accent);
    --sl-rapide-asides-link-hover-color: var(--sl-color-blue-accent-invert);
    --sl-rapide-asides-table-alt-color: var(--sl-color-blue-alt);
    --sl-rapide-asides-table-border-color: var(--sl-color-blue-alt-invert);
  }
  
  .starlight-aside.starlight-aside--tip {
    --sl-rapide-asides-bg-color: var(--sl-color-purple-low);
    --sl-rapide-asides-link-color: var(--sl-color-purple-accent);
    --sl-rapide-asides-link-hover-color: var(--sl-color-purple-accent-invert);
    --sl-rapide-asides-table-alt-color: var(--sl-color-purple-alt);
    --sl-rapide-asides-table-border-color: var(--sl-color-purple-alt-invert);
  }
  
  .starlight-aside.starlight-aside--caution {
    --sl-rapide-asides-bg-color: var(--sl-color-orange-low);
    --sl-rapide-asides-link-color: var(--sl-color-orange-accent);
    --sl-rapide-asides-link-hover-color: var(--sl-color-orange-accent-invert);
    --sl-rapide-asides-table-alt-color: var(--sl-color-orange-alt);
    --sl-rapide-asides-table-border-color: var(--sl-color-orange-alt-invert);
  }
  
  .starlight-aside.starlight-aside--danger {
    --sl-rapide-asides-bg-color: var(--sl-color-red-low);
    --sl-rapide-asides-link-color: var(--sl-color-red-accent);
    --sl-rapide-asides-link-hover-color: var(--sl-color-red-accent-invert);
    --sl-rapide-asides-table-alt-color: var(--sl-color-red-alt);
    --sl-rapide-asides-table-border-color: var(--sl-color-red-alt-invert);
  }
  
  .starlight-aside {
    border: 1px solid var(--sl-color-asides-border);
    border-radius: 0.5rem;
    color: var(--sl-color-asides-text-accent);
  }
  
  .starlight-aside a {
    color: var(--sl-rapide-asides-link-color);
  }
  
  .starlight-aside a:is(:hover, :focus-visible) {
    color: var(--sl-rapide-asides-link-hover-color);
  }
  
  .starlight-aside tr:nth-child(2n) {
    background-color: var(--sl-rapide-asides-table-alt-color);
  }
  
  .starlight-aside td {
    border-color: var(--sl-rapide-asides-table-border-color);
  }
  
  /* File Tree */
  
  .sl-markdown-content starlight-file-tree {
    background-color: var(--sl-rapide-ui-bg-color);
    border: 1px solid var(--sl-rapide-ui-border-color);
    border-radius: 0.5rem;
  }
  
  .sl-markdown-content starlight-file-tree .directory > details > summary:hover ~ ul {
    border-color: var(--sl-color-accent-high);
  }
  
  /* Notices */
  
  .content-panel:first-of-type p.sl-flex:not(:where(.sl-markdown-content *)) {
    border-radius: 0.5rem;
    padding: 1rem;
  }
  
  .content-panel:first-of-type p.sl-flex:not(:where(.sl-markdown-content *)) svg {
    flex-shrink: 0;
  }
  
  /* Hero */
  
  .hero .action {
    border: 1px solid transparent;
    padding: 0.75rem 1rem;
  }
  
  .hero .action svg {
    font-size: 1.25rem;
  }
  
  .hero .action.primary {
    background-color: var(--sl-color-green-low);
    border: 1px solid var(--sl-color-green);
    color: var(--sl-color-green-high);
  }
  
  .hero .action.primary:is(:hover, :focus-visible) {
    border-color: oklch(52% 0.11 var(--sl-hue-green));
    color: var(--sl-color-green-accent-invert);
  }
  
  .hero .action.secondary {
    border-color: var(--sl-color-gray-2);
    color: var(--sl-color-gray-2);
  }
  
  .hero .action.secondary:is(:hover, :focus-visible) {
    border-color: var(--sl-color-accent-high);
    color: var(--sl-color-accent-high);
  }
  
  .hero .action.minimal:is(:hover, :focus-visible) {
    color: var(--sl-color-accent-high);
  }
  
  .hero .action.minimal {
    padding-inline: 0.25rem;
  }
  
  /* Steps */
  
  .sl-steps > li:last-of-type::after {
    --guide-width: 1px;
  
    background: linear-gradient(to bottom, var(--sl-color-hairline-light), var(--sl-color-bg) 85%);
    bottom: var(--bullet-margin);
    content: '';
    inset-inline-start: calc((var(--bullet-size) - var(--guide-width)) / 2);
    position: absolute;
    top: calc(var(--bullet-size) + var(--bullet-margin));
    width: var(--guide-width);
  }
  
  /* Badges */
  
  .sl-badge {
    --sl-badge-default-text: var(--sl-color-green-high);
    --sl-badge-tip-text: var(--sl-color-purple-high);
    --sl-badge-caution-text: var(--sl-color-orange-high);
    --sl-badge-note-text: var(--sl-color-blue-high);
    --sl-badge-success-text: var(--sl-color-green-high);
    --sl-badge-danger-text: var(--sl-color-red-high);
  }
  
  [data-theme='light'] .sl-badge {
    --sl-badge-default-bg: var(--sl-color-green-low);
    --sl-badge-default-text: var(--sl-color-green-high);
    --sl-badge-tip-bg: var(--sl-color-purple-low);
    --sl-badge-tip-text: var(--sl-color-purple-high);
    --sl-badge-caution-bg: var(--sl-color-orange-low);
    --sl-badge-caution-text: var(--sl-color-orange-high);
    --sl-badge-note-bg: var(--sl-color-blue-low);
    --sl-badge-note-text: var(--sl-color-blue-high);
    --sl-badge-success-bg: var(--sl-color-green-low);
    --sl-badge-success-text: var(--sl-color-green-high);
    --sl-badge-danger-bg: var(--sl-color-red-low);
    --sl-badge-danger-text: var(--sl-color-red-high);
  }